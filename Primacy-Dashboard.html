<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRIMACY Protocol Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        /* --- GLOBAL STYLES & RESET --- */
        :root {
            --color-black: #080808;
            --color-dark-grey: #1a1a1a;
            --color-mid-grey: #2e2e2e;
            --color-light-grey: #888888;
            --color-white: #f5f5f5;
            --color-apex-accent: #00ff9d;
            --color-reset-accent: #00c6ff;
            --color-apex-glow: #00ff9d;
            --color-reset-glow: #00c6ff;
            --gradient-apex: linear-gradient(135deg, #00ff9d 0%, #00d17a 100%);
            --gradient-reset: linear-gradient(135deg, #00c6ff 0%, #0099cc 100%);
            --gradient-dark: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%);
            --font-primary: 'Roboto', sans-serif;
            --font-display: 'Roboto Condensed', sans-serif;
            --transition-smooth: cubic-bezier(0.23, 1, 0.32, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { 
            background-color: var(--color-black); 
            font-family: var(--font-primary); 
            color: var(--color-white); 
            line-height: 1.6; 
            display: flex;
            font-weight: 300;
            overflow-x: hidden;
        }

        /* Noise texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.02;
            z-index: 1;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
        
        /* --- SIDEBAR NAVIGATION --- */
        .sidebar {
            width: 260px;
            background: rgba(8, 8, 8, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            padding: 2rem 1.5rem;
            z-index: 100;
            transition: transform 0.6s var(--transition-smooth);
        }

        .sidebar-header { 
            text-align: center; 
            margin-bottom: 3rem;
            animation: fadeInDown 0.8s ease-out;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-decoration: none;
            transition: transform 0.3s ease;
        }
        .logo:hover {
            transform: scale(1.05);
        }
        .logo-img { 
            height: 40px; 
            width: auto;
            filter: drop-shadow(0 0 20px rgba(0, 255, 157, 0.3));
        }
        .logo-text {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(180deg, #ffffff 0%, #888888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .nav-menu { 
            list-style: none; 
            flex-grow: 1;
        }
        .nav-item {
            animation: fadeInLeft 0.6s ease-out forwards;
            opacity: 0;
        }
        .nav-item:nth-child(1) { animation-delay: 0.1s; }
        .nav-item:nth-child(2) { animation-delay: 0.2s; }
        .nav-item:nth-child(3) { animation-delay: 0.3s; }
        .nav-item:nth-child(4) { animation-delay: 0.4s; }
        .nav-item:nth-child(5) { animation-delay: 0.5s; }

        .nav-item a { 
            display: flex; 
            align-items: center; 
            padding: 15px; 
            color: var(--color-light-grey); 
            text-decoration: none; 
            border-radius: 12px; 
            margin-bottom: 0.5rem; 
            transition: all 0.3s ease;
            font-size: 0.95rem;
            font-weight: 400;
            position: relative;
            overflow: hidden;
        }
        .nav-item a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-apex);
            opacity: 0.1;
            transition: left 0.3s ease;
        }
        .nav-item a:hover::before {
            left: 0;
        }
        .nav-item a:hover { 
            color: var(--color-white);
            transform: translateX(5px);
        }
        .nav-item a.active { 
            background: var(--gradient-apex);
            color: var(--color-black); 
            font-weight: 600;
            box-shadow: 
                0 0 30px rgba(0, 255, 157, 0.4),
                inset 0 0 20px rgba(0, 255, 157, 0.2);
        }
        .nav-item svg { 
            width: 20px; 
            height: 20px; 
            margin-right: 15px; 
            fill: currentColor;
        }
        
        .sidebar-footer { 
            border-top: 1px solid rgba(255, 255, 255, 0.05); 
            padding-top: 1rem;
            animation: fadeInUp 0.8s ease-out 0.6s forwards;
            opacity: 0;
        }

        /* --- MAIN CONTENT AREA --- */
        .main-content { 
            flex-grow: 1; 
            margin-left: 260px; 
            padding: 2rem 3rem; 
            overflow-y: auto; 
            height: 100vh;
            position: relative;
            z-index: 2;
        }
        .main-content section { 
            display: none;
            opacity: 0;
            transition: all 0.6s var(--transition-smooth);
        }
        .main-content section.active { 
            display: block;
            animation: sectionFadeIn 0.8s ease-out forwards;
        }

        @keyframes sectionFadeIn {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.98);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .page-header { 
            margin-bottom: 2rem;
            animation: fadeInDown 0.8s ease-out;
        }
        .page-header h1 { 
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 900;
            letter-spacing: -0.02em;
            background: linear-gradient(180deg, #ffffff 0%, #888888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }
        .page-header p { 
            text-align: left; 
            margin: 0.5rem 0 0 0; 
            max-width: 100%;
            color: var(--color-light-grey);
            font-weight: 300;
            font-size: 1.1rem;
        }

        /* --- DASHBOARD STYLES --- */
        .metrics-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .metric-card { 
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: clamp(1.5rem, 3vw, 2rem);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            animation: slideUp 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(30px);
        }
        .metric-card:nth-child(1) { animation-delay: 0.1s; }
        .metric-card:nth-child(2) { animation-delay: 0.2s; }
        .metric-card:nth-child(3) { animation-delay: 0.3s; }
        .metric-card:nth-child(4) { animation-delay: 0.4s; }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 70%);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }
        .metric-card:hover::before {
            opacity: 1;
        }
        .metric-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .metric-card h3 { 
            font-size: 0.75rem;
            font-weight: 400;
            color: var(--color-light-grey);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }
        .metric-card:hover h3 {
            opacity: 1;
        }
        
        .metric-value-wrapper {
            position: relative;
        }
        
        .metric-value { 
            font-size: clamp(2rem, 5vw, 3rem);
            font-family: var(--font-display);
            font-weight: 200;
            line-height: 1;
            font-variant-numeric: tabular-nums;
            position: relative;
            display: inline-block;
        }
        .metric-value .number {
            position: relative;
            z-index: 2;
        }
        .metric-value[style*="apex"] .number {
            text-shadow: 0 0 30px rgba(0, 255, 157, 0.8);
        }
        .metric-value[style*="reset"] .number {
            text-shadow: 0 0 30px rgba(0, 198, 255, 0.8);
        }
        
        .metric-value .unit { 
            font-size: 1rem; 
            color: var(--color-light-grey); 
            margin-left: 0.5rem;
            font-weight: 300;
        }
        
        .metric-trend { 
            display: flex; 
            align-items: center; 
            margin-top: 1rem; 
            font-size: 0.85rem;
            font-weight: 400;
            opacity: 0.8;
        }
        .trend-icon {
            display: inline-block;
            margin-right: 0.5rem;
            font-size: 1rem;
        }
        .trend-up { 
            color: var(--color-apex-accent);
        }
        .trend-down { 
            color: #ff4d4d;
        }

        @keyframes pulse {
            0% { 
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
            100% { 
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .chart-container { 
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            margin-top: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            animation: fadeIn 0.8s ease-out 0.6s forwards;
            opacity: 0;
        }
        .chart-container h3 { 
            margin-bottom: 1.5rem; 
            text-align: center;
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .chart-container canvas { 
            height: 300px !important; 
            width: 100% !important;
        }

        .insights-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 1.5rem; 
            margin-top: 1.5rem;
        }
        
        .insight-card { 
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid;
            transition: all 0.3s ease;
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        .insight-card:nth-child(1) { animation-delay: 0.7s; }
        .insight-card:nth-child(2) { animation-delay: 0.8s; }
        .insight-card:nth-child(3) { animation-delay: 0.9s; }
        .insight-card:nth-child(4) { animation-delay: 1s; }

        .insight-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
        }
        .insight-card.positive { 
            border-color: var(--color-apex-accent);
        }
        .insight-card.positive:hover {
            box-shadow: 
                0 8px 30px rgba(0, 0, 0, 0.4),
                0 0 30px rgba(0, 255, 157, 0.2);
        }
        .insight-card.negative { 
            border-color: #ff4d4d;
        }
        .insight-card strong { 
            color: var(--color-white); 
            display: block; 
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 0.95rem;
        }
        .insight-card p {
            font-weight: 300;
            line-height: 1.6;
            color: rgba(245, 245, 245, 0.8);
        }

        /* --- LOG STYLES --- */
        .log-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 1.5rem;
        }
        .log-card { 
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        .log-card:nth-child(1) { animation-delay: 0.2s; }
        .log-card:nth-child(2) { animation-delay: 0.4s; }
        .log-card:nth-child(3) { animation-delay: 0.6s; }

        .log-card h3 { 
            text-align: center; 
            margin-bottom: 1.5rem;
            font-family: var(--font-display);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .log-toggle { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            margin-bottom: 1.5rem;
        }
        .log-toggle span {
            font-weight: 400;
            font-size: 0.95rem;
        }
        
        /* Enhanced Switch */
        .switch { 
            position: relative; 
            display: inline-block; 
            width: 60px; 
            height: 30px;
        }
        .switch input { 
            opacity: 0; 
            width: 0; 
            height: 0;
        }
        .slider { 
            position: absolute; 
            cursor: pointer; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background-color: var(--color-mid-grey); 
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            border-radius: 30px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .slider:before { 
            position: absolute; 
            content: ""; 
            height: 22px; 
            width: 22px; 
            left: 4px; 
            bottom: 4px; 
            background-color: white; 
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        input:checked + .slider { 
            background: var(--gradient-apex);
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(0, 255, 157, 0.4);
        }
        input#reset-toggle:checked + .slider { 
            background: var(--gradient-reset);
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(0, 198, 255, 0.4);
        }
        input:checked + .slider:before { 
            transform: translateX(30px);
        }
        
        .rating-scale { 
            margin-top: 1.5rem;
        }
        .rating-scale p { 
            text-align: left; 
            margin: 0 0 0.5rem 0;
            font-weight: 400;
            font-size: 0.95rem;
            color: var(--color-light-grey);
        }
        .scale-numbers { 
            display: flex; 
            justify-content: space-between;
            gap: 5px;
        }
        .scale-numbers span { 
            width: 32px; 
            height: 32px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(46, 46, 46, 0.5);
            border-radius: 8px;
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            font-size: 0.9rem;
            font-weight: 500;
            backdrop-filter: blur(5px);
        }
        .scale-numbers span:hover { 
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .scale-numbers span.active { 
            background: var(--gradient-apex);
            color: var(--color-black); 
            border-color: transparent;
            transform: translateY(-2px) scale(1.1);
            box-shadow: 
                0 4px 20px rgba(0, 255, 157, 0.4),
                inset 0 0 10px rgba(0, 255, 157, 0.2);
            font-weight: 700;
        }
        .reset-card .scale-numbers span.active { 
            background: var(--gradient-reset);
            box-shadow: 
                0 4px 20px rgba(0, 198, 255, 0.4),
                inset 0 0 10px rgba(0, 198, 255, 0.2);
        }
        
        .context-tags { 
            margin-top: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .context-tags button { 
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--color-light-grey); 
            padding: 10px 16px;
            border-radius: 24px;
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            font-weight: 400;
            font-size: 0.9rem;
        }
        .context-tags button:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
            color: var(--color-white);
        }
        .context-tags button.active { 
            background: var(--color-white); 
            color: var(--color-black); 
            border-color: var(--color-white);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }
        
        .log-submit { 
            width: 100%; 
            padding: 18px;
            background: var(--gradient-apex);
            color: var(--color-black); 
            border: none; 
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase; 
            font-family: var(--font-display);
            cursor: pointer; 
            margin-top: 2rem;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 
                0 4px 20px rgba(0, 255, 157, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            letter-spacing: 0.1em;
            animation: fadeIn 0.8s ease-out 0.8s forwards;
            opacity: 0;
        }
        .log-submit:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 30px rgba(0, 255, 157, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        .log-submit:active {
            transform: translateY(0);
        }
        
        /* --- SETTINGS STYLES --- */
        .settings-card { 
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        .settings-card h3 { 
            margin-bottom: 1.5rem;
            font-family: var(--font-display);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .settings-card p {
            text-align: left;
            max-width: 100%;
            color: var(--color-light-grey);
            font-weight: 300;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .integration-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 1.5rem;
        }
        .integration-card { 
            background: rgba(8, 8, 8, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 2rem 1.5rem;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        .integration-card:nth-child(1) { animation-delay: 0.2s; }
        .integration-card:nth-child(2) { animation-delay: 0.3s; }
        .integration-card:nth-child(3) { animation-delay: 0.4s; }
        .integration-card:nth-child(4) { animation-delay: 0.5s; }

        .integration-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
        }
        .integration-logo { 
            height: 50px;
            margin-bottom: 1.5rem;
            filter: grayscale(100%);
            opacity: 0.6;
            transition: all 0.3s ease;
            object-fit: contain;
        }
        .integration-card:hover .integration-logo { 
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.1);
        }
        .connect-btn { 
            width: 100%; 
            padding: 12px;
            border: 1px solid var(--color-apex-accent);
            color: var(--color-apex-accent);
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            font-weight: 500;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .connect-btn:hover {
            background: var(--color-apex-accent);
            color: var(--color-black);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 255, 157, 0.4);
        }
        
        /* --- ANIMATIONS --- */
        @keyframes fadeIn {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* --- RESPONSIVE --- */
        .hamburger { display: none; }
        
        /* --- COGNITIVE GAUNTLET STYLES --- */
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .test-card {
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        
        .test-card h3 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .test-frequency {
            color: var(--color-light-grey);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }
        
        .test-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-label {
            display: block;
            font-size: 0.75rem;
            color: var(--color-light-grey);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-white);
        }
        
        .stat-unit {
            font-size: 0.8rem;
            color: var(--color-light-grey);
            margin-left: 0.25rem;
        }
        
        .test-button {
            width: 100%;
            padding: 15px;
            background: var(--gradient-apex);
            color: var(--color-black);
            border: none;
            border-radius: 8px;
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            margin-bottom: 1rem;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(0, 255, 157, 0.5);
        }
        
        .streak-indicator, .next-test {
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-apex-accent);
        }
        
        .performance-chart-container {
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            margin-top: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.8s ease-out 0.4s forwards;
            opacity: 0;
            height: 400px;
            position: relative;
        }
        
        .performance-chart-container canvas {
            position: absolute;
            top: 4rem;
            left: 2rem;
            right: 2rem;
            bottom: 2rem;
            max-height: 300px;
        }
        
        .cognitive-insights h3 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* --- ACHIEVEMENTS STYLES --- */
        .achievement-stats {
            margin-bottom: 2rem;
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        
        .achievement-summary {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .summary-item {
            text-align: center;
        }
        
        .summary-value {
            display: block;
            font-family: var(--font-display);
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .summary-label {
            font-size: 0.9rem;
            color: var(--color-light-grey);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        .achievement-card {
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        
        .achievement-card.unlocked {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .achievement-card.locked {
            opacity: 0.5;
        }
        
        .achievement-card.legendary.unlocked {
            border-color: #FFD700;
            box-shadow: 
                0 4px 20px rgba(255, 215, 0, 0.3),
                inset 0 1px 0 rgba(255, 215, 0, 0.2);
        }
        
        .achievement-card.epic.unlocked {
            border-color: #B19CD9;
            box-shadow: 
                0 4px 20px rgba(177, 156, 217, 0.3),
                inset 0 1px 0 rgba(177, 156, 217, 0.2);
        }
        
        .achievement-card.rare.unlocked {
            border-color: #00c6ff;
            box-shadow: 
                0 4px 20px rgba(0, 198, 255, 0.3),
                inset 0 1px 0 rgba(0, 198, 255, 0.2);
        }
        
        .achievement-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            filter: grayscale(0);
        }
        
        .achievement-card.locked .achievement-icon {
            filter: grayscale(100%);
        }
        
        .achievement-card h4 {
            font-family: var(--font-display);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .achievement-card p {
            font-size: 0.9rem;
            color: var(--color-light-grey);
            margin-bottom: 1rem;
        }
        
        .achievement-date, .achievement-progress {
            font-size: 0.8rem;
            color: var(--color-apex-accent);
        }
        
        .achievement-card.locked .achievement-progress {
            color: var(--color-light-grey);
        }
        
        /* --- FOUNDRY STYLES --- */
        .foundry-welcome {
            text-align: center;
            margin-bottom: 2rem;
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        
        .foundry-status {
            display: inline-block;
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem 3rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .status-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .badge-icon {
            width: 24px;
            height: 24px;
            background: var(--gradient-apex);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-black);
            font-weight: bold;
        }
        
        .badge-text {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .member-since {
            color: var(--color-light-grey);
            font-size: 0.9rem;
        }
        
        .foundry-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .foundry-card {
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        
        .foundry-card:nth-child(1) { animation-delay: 0.1s; }
        .foundry-card:nth-child(2) { animation-delay: 0.2s; }
        .foundry-card:nth-child(3) { animation-delay: 0.3s; }
        .foundry-card:nth-child(4) { animation-delay: 0.4s; }
        
        .foundry-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .foundry-card h3 {
            font-family: var(--font-display);
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .foundry-card p {
            color: var(--color-light-grey);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .activity-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: var(--color-light-grey);
        }
        
        .activity-dot {
            width: 8px;
            height: 8px;
            background: var(--color-light-grey);
            border-radius: 50%;
        }
        
        .activity-dot.active {
            background: var(--color-apex-accent);
            box-shadow: 0 0 10px rgba(0, 255, 157, 0.5);
        }
        
        .new-badge {
            background: var(--gradient-apex);
            color: var(--color-black);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.75rem;
        }
        
        .foundry-button {
            width: 100%;
            padding: 12px;
            background: transparent;
            color: var(--color-apex-accent);
            border: 1px solid var(--color-apex-accent);
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        .foundry-button:hover {
            background: var(--color-apex-accent);
            color: var(--color-black);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 255, 157, 0.4);
        }
        
        .community-stats {
            background: linear-gradient(145deg, #1f1f1f 0%, #161616 100%);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.8s ease-out 0.5s forwards;
            opacity: 0;
        }
        
        .community-stats h3 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
        }
        
        .community-stat {
            text-align: center;
        }
        
        .stat-number {
            display: block;
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--color-apex-accent);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--color-light-grey);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        @media (max-width: 992px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.active { transform: translateX(0); }
            .main-content { margin-left: 0; }
            .hamburger { 
                display: block; 
                position: fixed; 
                top: 25px; 
                left: 25px; 
                z-index: 1001; 
                background: rgba(26, 26, 26, 0.9);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                padding: 10px;
                cursor: pointer;
            }
            .hamburger .bar { 
                display: block; 
                width: 25px; 
                height: 3px; 
                margin: 5px auto; 
                background-color: var(--color-white); 
                transition: all 0.3s ease-in-out;
            }
            .hamburger.active .bar:nth-child(2) { opacity: 0; }
            .hamburger.active .bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
            .hamburger.active .bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
            .log-grid, .insights-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 768px) {
            .metrics-grid { grid-template-columns: 1fr; }
            .chart-container canvas { height: 250px !important; }
        }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="sidebar-header">
            <a href="https://primacy.io/APEX.html" class="logo">
                <img src="https://primacy.io/primacy_logo.png" alt="PRIMACY Logo" class="logo-img">
                <span class="logo-text">PRIMACY</span>
            </a>
        </div>
        <ul class="nav-menu">
            <li class="nav-item"><a href="#dashboard" class="nav-link active"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z" /></svg><span>Dashboard</span></a></li>
            <li class="nav-item"><a href="#log" class="nav-link"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19M17,17H7V15H17V17M17,13H7V11H17V13M17,9H7V7H17V9Z" /></svg><span>Protocol Log</span></a></li>
            <li class="nav-item"><a href="#gauntlet" class="nav-link"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,14C13.66,14 15,12.66 15,11C15,9.34 13.66,8 12,8C10.34,8 9,9.34 9,11C9,12.66 10.34,14 12,14M21.71,11.29L12.71,2.29C12.32,1.9 11.69,1.9 11.3,2.29L2.29,11.29C1.9,11.68 1.9,12.31 2.29,12.7L11.29,21.7C11.68,22.1 12.31,22.1 12.7,21.7L21.7,12.7C22.1,12.32 22.1,11.69 21.71,11.29Z" /></svg><span>Cognitive Gauntlet</span></a></li>
            <li class="nav-item"><a href="#achievements" class="nav-link"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L15,14.63C14.3,15.39 13.2,16 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8C13.2,8 14.3,8.61 15,9.37L16.2,7.8C15.11,6.69 13.64,6 12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18C13.64,18 15.11,17.31 16.2,16.2M13,12H17V14L20,11L17,8V10H13V12Z" /></svg><span>Achievements</span></a></li>
            <li class="nav-item"><a href="#foundry" class="nav-link"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,3C13.1,3 14,3.9 14,5C14,6.1 13.1,7 12,7C10.9,7 10,6.1 10,5C10,3.9 10.9,3 12,3M16,3C17.1,3 18,3.9 18,5C18,6.1 17.1,7 16,7C14.9,7 14,6.1 14,5C14,3.9 14.9,3 16,3M8,3C9.1,3 10,3.9 10,5C10,6.1 9.1,7 8,7C6.9,7 6,6.1 6,5C6,3.9 6.9,3 8,3M12,8C14.21,8 16,8.9 16,10V15H13V22H11V15H8V10C8,8.9 9.79,8 12,8M18,10V12H19V10H18M6,10V12H5V10H6Z" /></svg><span>The Foundry</span></a></li>
        </ul>
        <div class="sidebar-footer">
            <a href="#settings" class="nav-link settings-link" style="padding: 15px 0; justify-content: center;">
                <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; margin: 0;"><path fill="#888888" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" /></svg>
            </a>
        </div>
    </nav>
    
    <button class="hamburger">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </button>

    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="active">
            <div class="page-header">
                <h1>Dashboard</h1>
                <p>Your 24-hour performance at a glance. Welcome back, Operator.</p>
            </div>
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>Sleep Score</h3>
                    <div class="metric-value-wrapper">
                        <div class="metric-value" style="color:var(--color-reset-accent);">
                            <span class="number" data-target="86">0</span>
                        </div>
                    </div>
                    <div class="metric-trend trend-up">
                        <span class="trend-icon">▲</span>
                        <span class="trend-text">3pts vs 7d avg</span>
                    </div>
                </div>
                <div class="metric-card">
                    <h3>Readiness / HRV</h3>
                    <div class="metric-value-wrapper">
                        <div class="metric-value" style="color:var(--color-apex-accent);">
                            <span class="number" data-target="92">0</span>
                        </div>
                    </div>
                    <div class="metric-trend trend-up">
                        <span class="trend-icon">▲</span>
                        <span class="trend-text">7ms vs 7d avg</span>
                    </div>
                </div>
                <div class="metric-card">
                    <h3>Resting Heart Rate</h3>
                    <div class="metric-value-wrapper">
                        <div class="metric-value">
                            <span class="number" data-target="52">0</span><span class="unit">bpm</span>
                        </div>
                    </div>
                    <div class="metric-trend trend-down">
                        <span class="trend-icon">▼</span>
                        <span class="trend-text">2bpm vs 7d avg</span>
                    </div>
                </div>
                <div class="metric-card">
                    <h3>Protocol Streak</h3>
                    <div class="metric-value-wrapper">
                        <div class="metric-value">
                            <span class="number" data-target="28">0</span><span class="unit">days</span>
                        </div>
                    </div>
                    <div class="metric-trend">Keep it up, Operator.</div>
                </div>
            </div>
            
            <div class="insights-grid">
                <div class="chart-container">
                    <h3>7-Day Sleep Performance</h3>
                    <canvas id="sleepChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>7-Day HRV Trend</h3>
                    <canvas id="hrvChart"></canvas>
                </div>
            </div>

            <div class="page-header" style="margin-top:2rem;">
                <h2 style="font-size: 1.8rem; margin-bottom: 1rem;">Protocol Diagnostics</h2>
            </div>
            <div class="insights-grid">
                <div class="insight-card positive">
                    <strong>Correlation Found:</strong>
                    <p>On nights following RESET use, your average Deep Sleep duration increased by 22 minutes. Recovery protocol is effective.</p>
                </div>
                <div class="insight-card positive">
                    <strong>Performance Alert:</strong>
                    <p>Your reaction time scores are 12% faster on days you've logged APEX use with a preceding Sleep Score over 85.</p>
                </div>
                <div class="insight-card negative">
                    <strong>Warning: Late Meal Logged</strong>
                    <p>Your RHR was 6bpm higher last night after logging a late meal. This correlated to a 15-point drop in Readiness.</p>
                </div>
                <div class="insight-card">
                    <strong>Status Report:</strong>
                    <p>You have unlocked the "30-Day Protocol" achievement. Your consistency is noted, Operator.</p>
                </div>
            </div>
        </section>

        <!-- Log Section -->
        <section id="log">
            <div class="page-header">
                <h1>Protocol Log</h1>
                <p>Log your daily inputs. Consistency is the key to correlation.</p>
            </div>
            <div class="log-grid">
                <div class="log-card apex-card">
                    <h3>Morning Debrief</h3>
                    <div class="log-toggle">
                        <span>APEX Protocol Initiated</span>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="rating-scale">
                        <p>Perceived Waking Energy (1-10)</p>
                        <div class="scale-numbers"></div>
                    </div>
                </div>
                <div class="log-card reset-card">
                    <h3>Nightly Debrief</h3>
                    <div class="log-toggle">
                        <span>RESET Protocol Initiated</span>
                        <label class="switch">
                            <input id="reset-toggle" type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="rating-scale">
                        <p>Perceived Focus Today (1-10)</p>
                        <div class="scale-numbers"></div>
                    </div>
                    <div class="rating-scale">
                        <p>Perceived Stress Today (1-10)</p>
                        <div class="scale-numbers stress-scale"></div>
                    </div>
                </div>
            </div>
            <div class="log-card" style="margin-top:1.5rem;">
                <h3>Context Log</h3>
                <p style="text-align:center; color: var(--color-light-grey); margin-bottom: 1rem;">Tag key variables that may impact your data.</p>
                <div class="context-tags">
                    <button>Late Meal</button>
                    <button>Alcohol</button>
                    <button>High-Intensity Workout</button>
                    <button>Travel</button>
                    <button>High-Stress Day</button>
                </div>
            </div>
            <button class="log-submit">Submit Daily Log</button>
        </section>

        <!-- Settings Section -->
        <section id="settings">
            <div class="page-header">
                <h1>Settings</h1>
                <p>Manage your account and data integrations.</p>
            </div>
            <div class="settings-card">
                <h3>Wearable Integrations</h3>
                <p>Connect your devices via the Terra API to automatically sync your biometric data. PRIMACY does not store your password and only accesses data with your explicit permission.</p>
                <div class="integration-grid">
                    <div class="integration-card">
                        <img src="https://www.primarymarkets.com/wp-content/uploads/2024/07/Oura-circle-logo.png" alt="Oura Logo" class="integration-logo">
                        <button class="connect-btn">Connect</button>
                    </div>
                    <div class="integration-card">
                        <img src="https://cdn0.iconfinder.com/data/icons/apple-apps/100/Apple_Health-1024.png" alt="Apple Health Logo" class="integration-logo">
                        <button class="connect-btn">Connect</button>
                    </div>
                    <div class="integration-card">
                        <img src="https://cdn.the5krunner.com/wp-content/uploads/2023/03/Garmin-Chat-GPT-Icon.png.webp" alt="Garmin Logo" class="integration-logo">
                        <button class="connect-btn">Connect</button>
                    </div>
                    <div class="integration-card">
                        <img src="https://mma.prnewswire.com/media/891194/WHOOP_BlackOutline_Logo.jpg?p=publish" alt="WHOOP Logo" class="integration-logo">
                        <button class="connect-btn">Connect</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cognitive Gauntlet Section -->
        <section id="gauntlet">
            <div class="page-header">
                <h1>Cognitive Gauntlet</h1>
                <p>Test your mental edge. Track your reaction time and cognitive performance.</p>
            </div>
            
            <div class="test-grid">
                <div class="test-card">
                    <h3>Reaction Time Test</h3>
                    <p class="test-frequency">Daily Challenge</p>
                    <div class="test-stats">
                        <div class="stat-item">
                            <span class="stat-label">Personal Best</span>
                            <span class="stat-value">182<span class="stat-unit">ms</span></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">7-Day Average</span>
                            <span class="stat-value">208<span class="stat-unit">ms</span></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Today's Best</span>
                            <span class="stat-value">195<span class="stat-unit">ms</span></span>
                        </div>
                    </div>
                    <button class="test-button">Start Test</button>
                    <div class="streak-indicator">
                        <span>Current Streak: 14 days</span>
                    </div>
                </div>
                
                <div class="test-card">
                    <h3>N-Back Test</h3>
                    <p class="test-frequency">Weekly Challenge</p>
                    <div class="test-stats">
                        <div class="stat-item">
                            <span class="stat-label">Highest Level</span>
                            <span class="stat-value">4<span class="stat-unit">-back</span></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Average Score</span>
                            <span class="stat-value">87<span class="stat-unit">%</span></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Last Test</span>
                            <span class="stat-value">3<span class="stat-unit">days ago</span></span>
                        </div>
                    </div>
                    <button class="test-button">Start Test</button>
                    <div class="next-test">
                        <span>Next scheduled: 4 days</span>
                    </div>
                </div>
            </div>
            
            <div class="performance-chart-container">
                <h3>30-Day Performance Trend</h3>
                <canvas id="performanceChart"></canvas>
            </div>
            
            <div class="cognitive-insights">
                <h3>Performance Insights</h3>
                <div class="insights-grid">
                    <div class="insight-card positive">
                        <strong>Peak Performance Window</strong>
                        <p>Your reaction times are 15% faster between 10am-12pm. Consider scheduling important tasks during this window.</p>
                    </div>
                    <div class="insight-card">
                        <strong>Protocol Correlation</strong>
                        <p>Days with APEX use show 11% improvement in N-Back scores compared to baseline.</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="achievements">
            <div class="page-header">
                <h1>Protocol Trophies</h1>
                <p>Your collection of achievements for protocol consistency and performance milestones.</p>
            </div>
            
            <div class="achievement-stats">
                <div class="achievement-summary">
                    <div class="summary-item">
                        <span class="summary-value">24</span>
                        <span class="summary-label">Total Achievements</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-value">3</span>
                        <span class="summary-label">Legendary</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-value">8</span>
                        <span class="summary-label">Epic</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-value">13</span>
                        <span class="summary-label">Rare</span>
                    </div>
                </div>
            </div>
            
            <div class="achievements-grid">
                <div class="achievement-card legendary unlocked">
                    <div class="achievement-icon">🏆</div>
                    <h4>Protocol Master</h4>
                    <p>100 consecutive days of protocol adherence</p>
                    <span class="achievement-date">Unlocked: May 15, 2025</span>
                </div>
                
                <div class="achievement-card epic unlocked">
                    <div class="achievement-icon">⚡</div>
                    <h4>Lightning Reflexes</h4>
                    <p>Achieve sub-180ms reaction time</p>
                    <span class="achievement-date">Unlocked: June 2, 2025</span>
                </div>
                
                <div class="achievement-card epic unlocked">
                    <div class="achievement-icon">🧠</div>
                    <h4>Mental Fortress</h4>
                    <p>Reach 5-back level in N-Back test</p>
                    <span class="achievement-date">Unlocked: May 28, 2025</span>
                </div>
                
                <div class="achievement-card rare unlocked">
                    <div class="achievement-icon">🌙</div>
                    <h4>Sleep Optimizer</h4>
                    <p>7 nights with sleep score above 90</p>
                    <span class="achievement-date">Unlocked: June 10, 2025</span>
                </div>
                
                <div class="achievement-card rare unlocked">
                    <div class="achievement-icon">💚</div>
                    <h4>HRV Champion</h4>
                    <p>Maintain HRV above 70ms for 14 days</p>
                    <span class="achievement-date">Unlocked: June 5, 2025</span>
                </div>
                
                <div class="achievement-card legendary locked">
                    <div class="achievement-icon">👑</div>
                    <h4>Apex Predator</h4>
                    <p>Top 1% in all cognitive tests for 30 days</p>
                    <span class="achievement-progress">Progress: 18/30 days</span>
                </div>
                
                <div class="achievement-card epic locked">
                    <div class="achievement-icon">🔥</div>
                    <h4>Consistency Champion</h4>
                    <p>Log every day for 365 days</p>
                    <span class="achievement-progress">Progress: 142/365 days</span>
                </div>
                
                <div class="achievement-card rare locked">
                    <div class="achievement-icon">🎯</div>
                    <h4>Perfect Week</h4>
                    <p>All metrics in optimal range for 7 days</p>
                    <span class="achievement-progress">Progress: 4/7 days</span>
                </div>
            </div>
        </section>
        <section id="foundry">
            <div class="page-header">
                <h1>The Foundry</h1>
                <p>Your gateway to the private, subscriber-only community.</p>
            </div>
            
            <div class="foundry-welcome">
                <div class="foundry-status">
                    <div class="status-badge active">
                        <span class="badge-icon">✓</span>
                        <span class="badge-text">Active Member</span>
                    </div>
                    <p class="member-since">Member since March 2025</p>
                </div>
            </div>
            
            <div class="foundry-grid">
                <div class="foundry-card">
                    <div class="card-icon">💬</div>
                    <h3>Community Forum</h3>
                    <p>Connect with fellow operators. Share insights, ask questions, and learn from the collective.</p>
                    <div class="activity-indicator">
                        <span class="activity-dot active"></span>
                        <span>127 members online</span>
                    </div>
                    <button class="foundry-button">Enter Forum</button>
                </div>
                
                <div class="foundry-card">
                    <div class="card-icon">📊</div>
                    <h3>Protocol Lab</h3>
                    <p>Access exclusive research, beta protocols, and advanced optimization strategies.</p>
                    <div class="activity-indicator">
                        <span class="new-badge">3 NEW</span>
                        <span>protocols this week</span>
                    </div>
                    <button class="foundry-button">Explore Lab</button>
                </div>
                
                <div class="foundry-card">
                    <div class="card-icon">🎯</div>
                    <h3>Monthly Challenges</h3>
                    <p>Compete in community challenges. Push your limits alongside elite performers.</p>
                    <div class="activity-indicator">
                        <span>Current:</span>
                        <span>"June Sleep Optimization"</span>
                    </div>
                    <button class="foundry-button">View Challenge</button>
                </div>
                
                <div class="foundry-card">
                    <div class="card-icon">🎓</div>
                    <h3>Masterclasses</h3>
                    <p>Live sessions with experts in sleep, performance, and human optimization.</p>
                    <div class="activity-indicator">
                        <span>Next session:</span>
                        <span>June 15, 2pm PST</span>
                    </div>
                    <button class="foundry-button">Register</button>
                </div>
            </div>
            
            <div class="community-stats">
                <h3>Community Impact</h3>
                <div class="stats-grid">
                    <div class="community-stat">
                        <span class="stat-number">2,847</span>
                        <span class="stat-label">Active Members</span>
                    </div>
                    <div class="community-stat">
                        <span class="stat-number">156K</span>
                        <span class="stat-label">Protocol Days Logged</span>
                    </div>
                    <div class="community-stat">
                        <span class="stat-number">89%</span>
                        <span class="stat-label">Average Improvement</span>
                    </div>
                    <div class="community-stat">
                        <span class="stat-number">4.9</span>
                        <span class="stat-label">Member Rating</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- UI ELEMENT SETUP ---
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.main-content section');
            const hamburger = document.querySelector('.hamburger');
            const sidebar = document.querySelector('.sidebar');

            // --- NAVIGATION ---
            function changeSection(targetId) {
                const id = targetId.startsWith('#') ? targetId.substring(1) : targetId;
                
                sections.forEach(section => {
                    section.classList.remove('active');
                    section.style.display = 'none';
                });
                
                const targetSection = document.getElementById(id);
                if (targetSection) {
                    targetSection.style.display = 'block';
                    // Force reflow
                    targetSection.offsetHeight;
                    targetSection.classList.add('active');
                    
                    // Reset animations for metric cards when switching to dashboard
                    if (id === 'dashboard') {
                        animateNumbers();
                    }
                }
                
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href') === `#${id}`);
                });
                
                if (sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                    hamburger.classList.remove('active');
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    changeSection(link.getAttribute('href'));
                });
            });

            hamburger.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                hamburger.classList.toggle('active');
            });

            // --- NUMBER COUNTING ANIMATION ---
            function animateNumbers() {
                const counters = document.querySelectorAll('.number[data-target]');
                
                counters.forEach(counter => {
                    const target = +counter.getAttribute('data-target');
                    const duration = 1500; // Animation duration in ms
                    const increment = target / (duration / 16); // 60fps
                    let current = 0;
                    
                    counter.innerText = '0';
                    
                    const updateCounter = () => {
                        current += increment;
                        if (current < target) {
                            counter.innerText = Math.ceil(current);
                            requestAnimationFrame(updateCounter);
                        } else {
                            counter.innerText = target;
                        }
                    };
                    
                    // Start animation after a small delay for better effect
                    setTimeout(updateCounter, 100);
                });
            }

            // Initial animation
            animateNumbers();

            // --- LOG FUNCTIONALITY ---
            document.querySelectorAll('.scale-numbers').forEach(container => {
                for (let i = 1; i <= 10; i++) {
                    const span = document.createElement('span');
                    span.textContent = i;
                    span.addEventListener('click', () => {
                        container.querySelectorAll('span').forEach(s => s.classList.remove('active'));
                        span.classList.add('active');
                    });
                    container.appendChild(span);
                }
            });
            
            document.querySelectorAll('.context-tags button').forEach(button => {
                button.addEventListener('click', () => button.classList.toggle('active'));
            });

            // --- CHART.JS IMPLEMENTATION ---
            const style = getComputedStyle(document.documentElement);
            const apexColor = style.getPropertyValue('--color-apex-accent').trim();
            const resetColor = style.getPropertyValue('--color-reset-accent').trim();
            const midGreyColor = style.getPropertyValue('--color-mid-grey').trim();
            const lightGreyColor = style.getPropertyValue('--color-light-grey').trim();
            const whiteColor = style.getPropertyValue('--color-white').trim();

            const chartFont = { family: 'Roboto', size: 12, weight: 300 };
            
            const chartOptions = (borderColor) => ({
                responsive: true,
                maintainAspectRatio: false,
                tension: 0.4,
                interaction: {
                    intersect: false,
                    mode: 'index',
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(8, 8, 8, 0.95)',
                        titleFont: { ...chartFont, weight: 600, family: 'Orbitron' },
                        bodyFont: chartFont,
                        padding: 12,
                        cornerRadius: 8,
                        boxPadding: 6,
                        borderColor: borderColor,
                        borderWidth: 1,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return context.parsed.y + (context.dataset.label.includes('Sleep') ? ' hours' : ' ms');
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        grid: { 
                            color: 'rgba(255, 255, 255, 0.03)',
                            drawBorder: false,
                        },
                        ticks: { 
                            color: lightGreyColor, 
                            font: chartFont,
                            padding: 10
                        }
                    },
                    x: {
                        grid: { 
                            display: false,
                            drawBorder: false,
                        },
                        ticks: { 
                            color: lightGreyColor, 
                            font: chartFont,
                            padding: 10
                        }
                    }
                }
            });
            
            // --- 7-Day Sleep Performance Chart ---
            const sleepCtx = document.getElementById('sleepChart');
            if(sleepCtx) {
                const sleepGradient = sleepCtx.getContext('2d').createLinearGradient(0, 0, 0, 300);
                sleepGradient.addColorStop(0, 'rgba(0, 198, 255, 0.3)');
                sleepGradient.addColorStop(1, 'rgba(0, 198, 255, 0.01)');
                
                new Chart(sleepCtx, { 
                    type: 'line', 
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Sleep (Hours)',
                            data: [7.5, 8.2, 7.8, 8.5, 7.2, 8.0, 8.8],
                            borderColor: resetColor,
                            backgroundColor: sleepGradient,
                            fill: true,
                            pointBackgroundColor: resetColor,
                            pointBorderColor: whiteColor,
                            pointHoverRadius: 8,
                            pointRadius: 5,
                            pointBorderWidth: 2,
                            pointHoverBorderWidth: 3,
                            borderWidth: 3,
                        }]
                    }, 
                    options: chartOptions(resetColor) 
                });
            }

            // --- 7-Day HRV Trend Chart ---
            const hrvCtx = document.getElementById('hrvChart');
            if(hrvCtx) {
                const hrvGradient = hrvCtx.getContext('2d').createLinearGradient(0, 0, 0, 300);
                hrvGradient.addColorStop(0, 'rgba(0, 255, 157, 0.3)');
                hrvGradient.addColorStop(1, 'rgba(0, 255, 157, 0.01)');
                
                new Chart(hrvCtx, { 
                    type: 'line', 
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'HRV (ms)',
                            data: [55, 58, 57, 62, 65, 63, 68],
                            borderColor: apexColor,
                            backgroundColor: hrvGradient,
                            fill: true,
                            pointBackgroundColor: apexColor,
                            pointBorderColor: whiteColor,
                            pointHoverRadius: 8,
                            pointRadius: 5,
                            pointBorderWidth: 2,
                            pointHoverBorderWidth: 3,
                            borderWidth: 3,
                        }]
                    }, 
                    options: chartOptions(apexColor) 
                });
            }

            // --- 30-Day Performance Trend Chart ---
            const performanceCtx = document.getElementById('performanceChart');
            if(performanceCtx) {
                const performanceGradient = performanceCtx.getContext('2d').createLinearGradient(0, 0, 0, 300);
                performanceGradient.addColorStop(0, 'rgba(0, 255, 157, 0.3)');
                performanceGradient.addColorStop(1, 'rgba(0, 255, 157, 0.01)');
                
                // Generate 30 days of mock data
                const labels = [];
                const reactionTimeData = [];
                const nBackData = [];
                const today = new Date();
                
                for (let i = 29; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    labels.push(date.getDate());
                    
                    // Mock reaction time data (180-220ms range with trend)
                    const baseRT = 200 - (30 - i) * 0.5; // Improving trend
                    reactionTimeData.push(baseRT + Math.random() * 20 - 10);
                    
                    // Mock N-Back scores (75-95% range)
                    const baseNB = 80 + (30 - i) * 0.3; // Improving trend
                    nBackData.push(baseNB + Math.random() * 10 - 5);
                }
                
                new Chart(performanceCtx, { 
                    type: 'line', 
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Reaction Time (ms)',
                                data: reactionTimeData,
                                borderColor: resetColor,
                                backgroundColor: 'transparent',
                                yAxisID: 'y',
                                pointRadius: 2,
                                pointHoverRadius: 5,
                                borderWidth: 2,
                                tension: 0.4
                            },
                            {
                                label: 'N-Back Score (%)',
                                data: nBackData,
                                borderColor: apexColor,
                                backgroundColor: 'transparent',
                                yAxisID: 'y1',
                                pointRadius: 2,
                                pointHoverRadius: 5,
                                borderWidth: 2,
                                tension: 0.4
                            }
                        ]
                    }, 
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        plugins: {
                            legend: { 
                                display: true,
                                labels: {
                                    color: lightGreyColor,
                                    font: chartFont,
                                    padding: 20
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(8, 8, 8, 0.95)',
                                titleFont: { ...chartFont, weight: 600, family: 'Roboto Condensed' },
                                bodyFont: chartFont,
                                padding: 12,
                                cornerRadius: 8,
                                boxPadding: 6,
                                borderColor: midGreyColor,
                                borderWidth: 1,
                                displayColors: true,
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.dataset.yAxisID === 'y') {
                                            label += Math.round(context.parsed.y) + 'ms';
                                        } else {
                                            label += Math.round(context.parsed.y) + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                grid: { 
                                    display: false,
                                    drawBorder: false,
                                },
                                ticks: { 
                                    color: lightGreyColor, 
                                    font: chartFont,
                                    padding: 10
                                }
                            },
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left',
                                title: {
                                    display: true,
                                    text: 'Reaction Time (ms)',
                                    color: resetColor,
                                    font: { ...chartFont, weight: 500 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.03)',
                                    drawBorder: false,
                                },
                                ticks: { 
                                    color: resetColor, 
                                    font: chartFont,
                                    padding: 10
                                }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                title: {
                                    display: true,
                                    text: 'N-Back Score (%)',
                                    color: apexColor,
                                    font: { ...chartFont, weight: 500 }
                                },
                                grid: {
                                    drawOnChartArea: false,
                                },
                                ticks: { 
                                    color: apexColor, 
                                    font: chartFont,
                                    padding: 10
                                }
                            }
                        }
                    }
                });
            }

            // --- HOVER EFFECTS FOR METRIC CARDS ---
            const metricCards = document.querySelectorAll('.metric-card');
            metricCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transform = 'translateY(-5px) scale(1.02)';
                });
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'translateY(0) scale(1)';
                });
            });

            // --- SMOOTH SCROLL FOR INTERNAL LINKS ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // --- INTERSECTION OBSERVER FOR FADE-IN ANIMATIONS ---
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe elements that should fade in
            document.querySelectorAll('.metric-card, .insight-card, .chart-container').forEach(el => {
                observer.observe(el);
            });
        });
    </script>
</body>
</html>
